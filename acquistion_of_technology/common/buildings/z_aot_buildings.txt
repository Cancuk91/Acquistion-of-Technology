# Government Buildings
building_ancient_palace = {
	base_buildtime = 600
	capital = yes
	can_demolish = no
	can_be_ruined = no
	can_build = no
	
	category = government

	prerequisites = {
		"tech_ancient_palace"
	}	
	
	convert_to = {
		building_hive_major_capital
	}

	upgrades = {
		building_ae_ancient_palace
	}

	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 35
	}

	##### FIR DEFUALT ###

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_fallen_empire = no
			}					
		}
		modifier = {
			job_acot_enforcer_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_non_swapped_tradition = tr_domination_imperious_architecture
				is_fallen_empire = no
			}					
		}
		modifier = {
			planet_housing_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_mechanical_empire = yes 
				is_fallen_empire = no
			}		
		}
		job_roboticist_add = 5
	}	
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood 
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
				is_fallen_empire = no
			}					
		}
		modifier = {
			job_administrator_add = 5
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_authority = auth_corporate 
				is_fallen_empire = no
			}
		}
		modifier = {
			job_executive_add = 5
		}
	}	
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_exalted_priesthood 
				is_fallen_empire = no
			}					
		}
		modifier = {	
			job_high_priest_add = 3
			job_administrator_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_aristocratic_elite
				is_fallen_empire = no
			 }					
		}
		modifier = {
			job_noble_add = 2
			job_administrator_add = 3
		} 
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_technocracy 
				is_fallen_empire = no
			}					
		}
		modifier = {
			job_head_researcher_add = 2		
			job_administrator_add = 3
		} 
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_merchant_guilds 
				is_fallen_empire = no			
			}					
		}
		modifier = {
			job_merchant_add = 3
			job_administrator_add = 2
		}
	}

	##### FOR FE ###

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_empire_spiritualist = no 
				is_fallen_empire = yes
			}
		}
		modifier = {
			job_fe_overseer_add = 2
			job_fe_protector_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_empire_spiritualist = yes 
				is_fallen_empire = yes
			}
		}
		modifier = {
			job_fe_sky_cardinal_add = 2
			job_fe_protector_add = 2
		}
	}

	resources = {
		category = planet_buildings
		upkeep = {
			energy = 10
		}
	}
		
	upgrades = {
	}
	
	ai_weight = {
		weight = 100
	}	
}

building_ancient_control_center = {
	base_buildtime = 600
	capital = yes
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no

	category = government
	
	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
	}
	
	convert_to = {
		building_ancient_palace
		building_ancient_hive_cluster
	}

	upgrades = {
		building_ae_ancient_control_center
	}
	
	allow = {
		num_pops >= 25
	}
	
	prerequisites = {
		"tech_ancient_control_center"
	}
	
	show_tech_unlock_if = { 
		is_machine_empire = yes
	}
	
	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 35
	}
	
	##### FOR DEFEARTHH ###

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_machine_empire = no
			}
		}
		modifier = {
			job_coordinator_add = 5
			job_replicator_add = 3
			job_maintenance_drone_add = 3
			job_acot_robodrone_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_machine_empire = no
			}
			NOR = {
				is_planet_class = pc_dark_fractured
				is_planet_class = pc_dark_fractured_ae
			}
		}
		modifier = {
			job_acot_enforcer_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_machine_empire = no
			}
			OR = {
				is_planet_class = pc_dark_fractured
				is_planet_class = pc_dark_fractured_ae
			}
		}
		modifier = {
			job_acot_enforcer_drone_add = 1
		}
	}

	##### FOR FE ###

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_machine_empire = yes
			}
		}
		modifier = {
			job_fe_guardian_bot_add = 5
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			sr_dark_matter = 50
		}		
		produces = {
			energy = 5
			sr_dark_matter = 1	
			acot_sr_dark_energy = 1
		}	
		produces = {
			trigger = {
				is_planet_class = pc_dark_fractured					
			}
			energy = 5
			sr_dark_matter = 1	
			acot_sr_dark_energy = 1
		}
		produces = {
			trigger = {
				is_planet_class = pc_dark_fractured_ae			
			}
			energy = 10
			sr_dark_matter = 3	
			acot_sr_dark_energy = 3
		}
	}
	
	triggered_desc = {
		text = job_coordinator_effect_desc
	}		
	
	triggered_desc = {
		text = job_replicator_effect_desc
	}	
	
	triggered_desc = {
		text = job_patrol_drone_effect_desc
	}
	
	ai_weight = {
		weight = 100
	}
}

building_ancient_hive_cluster = {
	base_buildtime = 600
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no

	category = government
	
	potential = {
		exists = owner
		owner = { is_hive_empire = yes }
	}
	
	convert_to = {
		building_ancient_control_center
		building_ancient_palace
	}
	
	allow = {
		num_pops >= 20
	}
	
	prerequisites = {
		"tech_ancient_hive_cluster"
	}
	
	show_tech_unlock_if = { 
		is_hive_empire = yes
	}
	
	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 35
		job_synapse_drone_add = 4
		job_maintenance_drone_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_machine_empire = no
			}
			NOR = {
				is_planet_class = pc_dark_fractured
				is_planet_class = pc_dark_fractured_ae
			}
		}
		modifier = {
			job_acot_enforcer_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_fallen_machine_empire = no
			}
			OR = {
				is_planet_class = pc_dark_fractured
				is_planet_class = pc_dark_fractured_ae
			}
		}
		modifier = {
			job_acot_enforcer_drone_add = 1
		}
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			sr_dark_matter = 50
		}		
		produces = {
			energy = 5
			sr_dark_matter = 1	
			acot_sr_dark_energy = 1
		}	
		produces = {
			trigger = {
				is_planet_class = pc_dark_fractured					
			}
			energy = 5
			sr_dark_matter = 1	
			acot_sr_dark_energy = 1
		}
		produces = {
			trigger = {
				is_planet_class = pc_dark_fractured_ae			
			}
			energy = 10
			sr_dark_matter = 3	
			acot_sr_dark_energy = 3
		}
	}
	
	triggered_desc = {
		text = job_synapse_drone_effect_desc
	}	

	triggered_desc = {
		text = job_maintenance_drone_effect_desc
	}	
	
	triggered_desc = {
		text = job_patrol_drone_effect_desc
	}		

	ai_weight = {
		weight = 100
	}
}

# Mineral Buildings
building_fe_dimensional_fabricator = {
	base_buildtime = 360
	can_build = yes
	can_demolish = yes
	icon = building_dimensional_fabricator
#	base_cap_amount = 5
	
	category = resource
	
	potential = {
		NOT = { has_modifier = resort_colony }
		NOT = { is_planet_class = pc_habitat }
		NOT = { has_modifier = slave_colony }
	}
	
	allow = {
		has_upgraded_capital = yes
	}
	
	planet_modifier = {
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1000
			sr_living_metal = 50
		}
		upkeep = {
			sr_dark_matter = 2
			sr_living_metal = 1
		}
		produces = {
			minerals = 100
			rare_crystals = 2
			exotic_gases = 2
			volatile_motes = 2			
		}
		produces = {
			trigger = {
				planet = {
					has_modifier = pm_planet_fe_buildings_boost
				}	
			}
			minerals = 20
			rare_crystals = 0.4
			exotic_gases = 0.4
			volatile_motes = 0.4	
		}
	}
		
	upgrades = {
		building_fe_dimensional_extractor
	}
	
	prerequisites = {
		"tech_fe_dimensional_fabricator"
	}	
	
	ai_weight = {
		weight = 10000
		
	}
}

# Food Buildings

building_fe_nourishment_center = {
	base_buildtime = 360
	can_build = yes
	can_demolish = yes
	icon = building_nourishment_center
#	base_cap_amount = 3
	
	category = resource
	
	potential = {
		NOT = { is_planet_class = pc_habitat }
		NOT = { is_planet_class = pc_machine }
		NOT = { has_modifier = resort_colony }
	}
	
	allow = {
		has_upgraded_capital = yes
	}
	
	planet_modifier = {
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1000
			volatile_motes = 120
		}
		upkeep = {
			energy = 20
			volatile_motes = 2
		}
		produces = {
			food = 100
		}
		produces = {
			trigger = {
				planet = {
					has_modifier = pm_planet_fe_buildings_boost
				}	
			}
			food = 20
		}	
	}
		
	upgrades = {
		building_fe_agri_processing_complex
	}
	
	prerequisites = {
		"tech_fe_nourishment_center"
	}	
	
	ai_weight = {
		weight = 10000
		
	}
}

#Consumer Goods

building_fe_affluence_center = {
	base_buildtime = 360
	can_build = yes
	can_demolish = yes
	icon = building_affluence_center
#	base_cap_amount = 3
	
	category = manufacturing
	
	potential = {
		exists = owner
		owner = {
			OR = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
			}
		}
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
	}
	
	allow = {
		has_major_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1000
			rare_crystals = 120			
		}
		upkeep = {
			energy = 10
			minerals = 10
			rare_crystals = 2		
		}
		produces = {
			consumer_goods = 50
		}
		produces = {
			trigger = {
				planet = {
					has_modifier = pm_planet_fe_buildings_boost
				}	
			}
			consumer_goods = 10
		}
	}
		
	upgrades = {
		building_fe_opulence_central
	}
	
	prerequisites = {
		"tech_fe_affluence_center"
	}	
	
	show_tech_unlock_if = { 
		OR = {
			is_gestalt = no
			has_valid_civic = civic_machine_servitor
		}
	}
	
	ai_weight = {
		weight = 10000
		
	}
}

#Housing

building_fe_sky_dome = {
	base_buildtime = 360
	can_build = yes
	icon = building_fe_dome
	base_cap_amount = 3
	
	category = amenity
	
	potential = {
		NOT = { is_planet_class = pc_habitat }
		NOT = { has_modifier = slave_colony }
		exists = owner
		owner = { 
			is_regular_empire = yes
		}
	}
	
	allow = {
		has_upgraded_capital = yes
	}
	
	convert_to = {
		building_drone_megastorage
		building_expanded_warren
		building_communal_housing_large
	}
	
	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 20
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_non_swapped_tradition = tr_domination_imperious_architecture
			}					
		}
		modifier = {
			planet_housing_add = 1
		}
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 750
			rare_crystals = 75
		}
		upkeep = {
			energy = 10
			rare_crystals = 2
		}
	}
	
	upgrades = {
	}
	
	prerequisites = {
		"tech_fe_sky_dome"
	}
	
	show_tech_unlock_if = { 
		is_regular_empire = yes
	}
	
	ai_weight = {
		weight = 5000
	}
}

building_fe_stronghold = {
	can_build = yes
	base_buildtime = 300
	planetary_ftl_inhibitor = yes
	add_to_first_building_slot = yes

	category = army

	planet_modifier = {
		planet_housing_add = 5
	}

	allow = {
		has_ascended_capital = yes
	}
	
	
	triggered_planet_modifier = {
		potential = {
			owner = { 
				is_fallen_empire = no
				is_gestalt = no 
			}
		}
		modifier = {
			job_acot_enforcer_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = { 
				is_fallen_empire = no
				is_gestalt = yes 
			}
		}
		modifier = {
			job_acot_enforcer_drone_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = { 
				is_fallen_empire = yes
			}
		}
		modifier = {
			job_fe_protector_add = 5
		}
	}

	prerequisites = {
		"tech_fe_stronghold"
	}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 50
			num_pops >= 25
			NOR = {
				num_buildings = {
					type = building_fe_stronghold
					value <= 2
				}
			}
			owner = {
				has_monthly_income = {
					resource = sr_dark_matter
					value <= 3
				}
				has_monthly_income = {
					resource = acot_sr_dark_energy
					value <= 3
				}
			}
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 300
			sr_dark_matter = 40
			acot_sr_dark_energy = 40
		}			
		upkeep = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			energy = 3
			sr_dark_matter = 2
			acot_sr_dark_energy = 2
		}
	}

	upgrades = {
		building_ae_stronghold
	}
}

building_giga_fortress_fe = {
	base_buildtime = 1200
	add_to_first_building_slot = yes
	can_be_ruined = no
	can_be_disabled = no

	planetary_ftl_inhibitor = yes

	category = army
	
	allow = {
	}
	
	planet_modifier = {
		planet_amenities_add = 20
		planet_housing_add = 20
		planet_stability_add = 50
	}
	army_modifier = {
		army_defense_morale_mult = 0.5
		army_defense_health_mult = 0.5	
		army_defense_damage_mult = 1.0
	}

	resources = {
		category = planet_buildings
		produces = {
			unity = 50
			food = 50
		}
		cost = {
			minerals = 35000
			influence = 150
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}			
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_fallen_empire = yes
			}
		 }
		 job_acot_giga_fortress_operator_ancient_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			owner = {
				is_fallen_empire = no
			}
		 }
		 job_acot_giga_fortress_operator_add = 3
	}
	
	upgrades = {
		building_giga_fortress
	}

	ai_weight = {
		weight = 150000
	}
}

building_giga_fortress = {
	base_buildtime = 700
	add_to_first_building_slot = yes
	can_be_ruined = no
	can_be_disabled = no
	can_demolish = no
	can_build = no

	planetary_ftl_inhibitor = yes

	base_cap_amount = 1

	category = army
	
	allow = {
		has_ascended_capital = yes
	}
	
	planet_modifier = {
		planet_amenities_add = 20
		planet_housing_add = 20
		planet_stability_add = 50
	}

	triggered_planet_modifier = {
		potential = { 
			owner = { is_gestalt = no }
		}
		job_acot_giga_fortress_operator_add = 3
		job_acot_enforcer_add = 10		
	}

	triggered_planet_modifier = {
		potential = { 
			owner = { is_gestalt = yes }
		}
		job_acot_giga_fortress_operator_drone_add = 3
		job_acot_enforcer_drone_add = 10		
	}

	triggered_planet_modifier = {
		potential = {
			owner = {
				is_fallen_empire = yes
			}
		 }
		 job_acot_giga_fortress_operator_ancient_add = 3
	}

	army_modifier = {
		army_defense_morale_mult = 1.0
		army_defense_health_mult = 0.5		
		army_defense_damage_mult = 0.5
	}

	resources = {
		category = planet_buildings
		produces = {
			unity = 50
			food = 50
		}
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 15000
			influence = 80
			sr_dark_matter = 200
			acot_sr_dark_energy = 200
		}	
		cost = {
			trigger = {
				owner = {
					is_ai = yes
				}
			}
			minerals = 1250
			influence = 25
			sr_dark_matter = 100
			acot_sr_dark_energy = 100
		}			
	}
	
	prerequisites = {
		"tech_giga_fortress"
	}
	
	ai_weight = {
		weight = 15000
		modifier = {
			factor = 0
			owner = {
				has_monthly_income = {
					resource = sr_dark_matter
					value <= 3
				}
			}
		}
	}

	upgrades = {
		building_giga_fortress_array
		building_giga_fortress_lab
		building_giga_fortress_obelisk
	}
}