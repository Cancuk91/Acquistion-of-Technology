#Failure
aot_production_core_failure_chance_0 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 0
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_10 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 1
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_20 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 2
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_30 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 3
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_40 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 4
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_failure_chance_0_tooltip"
	}
}

aot_production_core_failure_chance_50 = {
	potential = {
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 5
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_failure_chance_0_tooltip"
	}
}

#Accelerator
giga_dismantle_accelerator = {
	potential = {
		exists = from
		event_target:giga_mega_manage_planet = {
			solar_system = {
				any_system_megastructure = {
					planet = {
						is_same_value = event_target:giga_mega_manage_planet
					}
				}
			}
		}
	}
	allow = {
		hidden_trigger = {
			NOT = {
				event_target:giga_mega_manage_planet = {
					has_planet_flag = cannot_dismantle_acc
				}
			}
		}
	}
	effect = {
		custom_tooltip = "giga_dismantle_accelerator_tooltip"
		hidden_effect = {
			from = {
				country_event = {
					id = giga_accelerator.2000
				}
			}
		}
	}
}

giga_manage_button_no_effect = {
	potential = {
		exists = from
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
}

giga_acc_physics_yes = {
	potential = {
		exists = from
		event_target:giga_mega_manage_planet = {
			check_variable = {
				which = acc_spec
				value = 1
			}
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_physics"
		hidden_effect = {
			from = {
				country_event = {
					id = giga_accelerator.1000
				}
			}
		}
	}
}

giga_acc_dm_yes = {
	potential = {
		exists = from
		event_target:giga_mega_manage_planet = {
			check_variable = {
				which = acc_spec
				value = 2
			}
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_dm"
		hidden_effect = {
			from = {
				country_event = {
					id = giga_accelerator.1000
				}
			}
		}
	}
}

giga_acc_qnm_yes = {
	potential = {
		exists = from
		event_target:giga_mega_manage_planet = {
			check_variable = {
				which = acc_spec
				value = 3
			}
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_qnm"
		hidden_effect = {
			from = {
				country_event = {
					id = giga_accelerator.1000
				}
			}
		}
	}
}

giga_acc_physics = {
	potential = {
		exists = from
		event_target:giga_mega_manage_planet = {
			NOT = {
				check_variable = {
					which = acc_spec
					value = 1
				}
			}
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_physics"
		hidden_effect = {
			event_target:giga_mega_manage_planet = {
				if = {
					limit = {
						check_variable = {
							which = acc_spec
							value = 2
						}
					}
					subtract_variable = {
						which = aot_production_core_failure_chance
						value = 5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acc_spec
							value = 3
						}
					}
					subtract_variable = {
						which = aot_production_core_failure_chance
						value = 10
					}
				}
				set_variable = {
					which = acc_spec
					value = 1
				}
			}
		}
	}
}

giga_acc_dm = {
	potential = {
		exists = from
		event_target:giga_mega_manage_planet = {
			NOT = {
				check_variable = {
					which = acc_spec
					value = 2
				}
			}
		}
	}
	allow = {
		from = {
			has_technology = tech_mine_dark_matter
		}
	}
	effect = {
		custom_tooltip = "giga_acc_dm"
		hidden_effect = {
			event_target:giga_mega_manage_planet = {
				if = {
					limit = {
						check_variable = {
							which = acc_spec
							value = 1
						}
					}
					change_variable = {
						which = aot_production_core_failure_chance
						value = 5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acc_spec
							value = 3
						}
					}
					subtract_variable = {
						which = aot_production_core_failure_chance
						value = 5
					}
				}
				set_variable = {
					which = acc_spec
					value = 2
				}
			}
		}
	}
}

giga_acc_qnm = {
	potential = {
		exists = from
		event_target:giga_mega_manage_planet = {
			NOT = {
				check_variable = {
					which = acc_spec
					value = 3
				}
			}
		}
	}
	allow = {
		from = {
			has_technology = tech_negative_pressure
		}
	}
	effect = {
		custom_tooltip = "giga_acc_qnm"
		hidden_effect = {
			event_target:giga_mega_manage_planet = {
				if = {
					limit = {
						check_variable = {
							which = acc_spec
							value = 2
						}
					}
					change_variable = {
						which = aot_production_core_failure_chance
						value = 5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							which = acc_spec
							value = 1
						}
					}
					change_variable = {
						which = aot_production_core_failure_chance
						value = 10
					}
				}
				set_variable = {
					which = acc_spec
					value = 3
				}
			}
		}
	}
}

aot_production_core_reactor_intensity_0 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 0
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_0"
	}
}

aot_production_core_reactor_intensity_1 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 1
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_0"
	}
}

aot_production_core_reactor_intensity_2 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 2
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_0"
	}
}

aot_production_core_reactor_intensity_3 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 3
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_0"
	}
}

aot_production_core_reactor_intensity_4 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 4
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_0"
	}
}

aot_production_core_reactor_intensity_5 = {
	potential = {
		exists = from
		check_variable = {
			which = current_dm_production_core_energy_level
			value = 5
		}
	}
	allow = {
		hidden_trigger = {
			always = yes
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_0"
	}
}

#buttons
aot_production_core_reactor_intensity_up = {
	potential = {
		exists = from
	}
	allow = {
		hidden_trigger = {
			NOT = {
				has_country_flag = has_ongoing_production_core_study
			}
			check_variable = {
				which = current_dm_production_core_energy_level
				value < 5
			}
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_up"
		hidden_effect = {
			change_variable = {
				which = current_dm_production_core_energy_level
				value = 1
			}
			change_variable = {
				which = aot_production_core_failure_chance
				value = 5
			}
		}
	}
}

aot_production_core_reactor_intensity_down = {
	potential = {
		exists = from
	}
	allow = {
		hidden_trigger = {
			NOT = {
				has_country_flag = has_ongoing_production_core_study
			}
			check_variable = {
				which = current_dm_production_core_energy_level
				value > 0
			}
		}
	}
	effect = {
		custom_tooltip = "giga_acc_intensity_down"
		hidden_effect = {
			subtract_variable = {
				which = current_dm_production_core_energy_level
				value = 1
			}
			subtract_variable = {
				which = aot_production_core_failure_chance
				value = 5
			}
		}
	}
}

aot_dm_production_core_proceed = {
	potential = {
		exists = from
	}
	allow = {
		NOT = {
			has_country_flag = has_ongoing_production_core_study
		}
	}
	effect = {
		set_country_flag = has_ongoing_production_core_study
		custom_tooltip = "aot_dm_production_core_proceed"
		hidden_effect = {
			if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 0
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_100_SUCCESS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 1
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_90_SUCCESS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 2
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_80_SUCCESS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 3
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_70_SUCCESS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 4
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_60_SUCCESS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = current_dm_production_core_energy_level
						value <= 5
					}
				}
				capital_scope = {
					save_event_target_as = pc_home
				}
				enable_special_project = {
					name = "RESEARCH_DM_PRODUCTION_CORE_50_SUCCESS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
	}
}
